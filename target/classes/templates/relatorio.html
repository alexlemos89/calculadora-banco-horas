<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <style>
        body { font-family: 'Arial Black', sans-serif; background-color: #f1f1f1; padding: 20px; }
        .box-relatorio { background: white; padding: 40px; border-radius: 30px; border: 8px solid #f39c12; max-width: 1000px; margin: auto; }
        h2 { color: #f39c12; font-size: 45px; text-align: center; text-transform: uppercase; }
        .card { border: 4px solid #333; margin-bottom: 30px; padding: 25px; border-radius: 20px; background: #fff; }
        .nome { font-size: 32px; color: #2980b9; border-bottom: 3px solid #ccc; padding-bottom: 10px; margin-bottom: 15px; }
        .item-hist { font-size: 24px; padding: 8px 0; border-bottom: 1px dashed #999; }
        .resumo-final { text-align: right; margin-top: 20px; font-size: 35px; font-weight: 900; }
        .ref-dias { color: #d35400; font-size: 26px; }
        .voltar { display: block; text-align: center; margin-top: 40px; font-size: 28px; color: #666; text-decoration: none; font-weight: 900; }
    </style>
</head>
<body>
    <div class="box-relatorio">
        <h2>4. RELATÓRIO DETALHADO</h2>
        <div th:each="f : ${lista}" class="card">
            <div class="nome" th:text="${f.nome + ' (RE: ' + f.registro + ')'}"></div>
            <div th:each="h : ${f.historico}" class="item-hist" th:text="${h}"></div>
            <div th:if="${f.historico.empty}" class="item-hist">NENHUM LANÇAMENTO.</div>
            
            <div class="resumo-final">
                TOTAL: <span th:text="${f.getSaldoFormatado()}"></span>
                <div class="ref-dias" th:text="${f.getReferenciaDias()}"></div>
            </div>
        </div>
        <a href="/dashboard" class="voltar">← VOLTAR AO MENU</a>
    </div>
</body>
</html>