<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Relatório Detalhado</title>
    <style>
        body { 
            font-family: 'Arial Black', sans-serif; 
            background-color: #f1f1f1; 
            padding: 20px; 
        }
        .box-g { 
            background: white; 
            padding: 40px; 
            border-radius: 30px; 
            border: 8px solid #27ae60; 
            max-width: 1300px; 
            margin: auto; 
            text-align: center; 
        }
        h2 { 
            color: #27ae60; 
            font-size: 45px; 
            text-transform: uppercase; 
            margin-bottom: 5px;
        }
        /* Estilo para mostrar quem está logado */
        .user-info {
            font-size: 20px;
            color: #2980b9;
            margin-bottom: 30px;
            text-transform: uppercase;
        }

        .card-funcionario {
            background-color: #fff;
            border: 4px solid #333; 
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: left;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .card-header {
            color: #2980b9;
            font-weight: 900;
            font-size: 28px;
            margin-bottom: 15px;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            text-transform: uppercase;
        }

        .historico-linha {
            font-weight: bold;
            font-size: 20px;
            color: #000;
            border-bottom: 1px dashed #ccc;
            padding: 8px 0;
        }

        .area-total {
            text-align: right;
            margin-top: 20px;
        }

        .total-valor {
            font-size: 35px;
            font-weight: 900;
            color: #000;
        }

        .equivalencia {
            font-size: 22px;
            font-weight: bold;
            margin-top: 5px;
        }

        .voltar { 
            display: block; 
            margin-top: 40px; 
            font-size: 28px; 
            color: #666; 
            text-decoration: none; 
            font-weight: 900; 
        }

        .positivo { color: #27ae60; }
        .negativo { color: #c0392b; }
    </style>
</head>
<body>

    <div class="box-g">
        <h2>4. RELATÓRIO DETALHADO</h2>
        <div class="user-info">
            Consultado por: <span th:text="${nomeExibicao}">USUÁRIO</span>
        </div>

        <div th:each="f : ${lista}" class="card-funcionario">
            
            <div class="card-header">
                <span th:text="${f?.nome}">NOME</span> 
                <small style="color: #666; font-size: 20px;" th:text="'(RE: ' + ${f?.registro} + ')'"></small>
            </div>

            <div th:each="h : ${f?.historico}" class="historico-linha">
                <span th:text="${h}"></span>
            </div>
            
            <div th:if="${#lists.isEmpty(f?.historico)}" class="historico-linha" style="color:#999;">
                Sem lançamentos registrados.
            </div>

            <div class="area-total">
                <div class="total-valor">
                    TOTAL: <span th:text="${f?.getSaldoFormatado()}">00h00min</span>
                </div>

                <div class="equivalencia" 
                     th:classappend="${f?.isSaldoPositivo() ? 'positivo' : 'negativo'}"
                     th:text="${f?.getTextoEquivalenciaCompleta()}">
                     Equivalente a...
                </div>
            </div>
        </div>

        <div th:if="${#lists.isEmpty(lista)}" style="font-size: 24px; color: red; font-weight: bold;">
            NENHUM DADO ENCONTRADO PARA ESTE PERFIL.
        </div>

        <a href="/dashboard" class="voltar">← VOLTAR AO MENU</a>
    </div>

</body>
</html>